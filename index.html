<!DOCTYPE html>
<html>
<head>
    <title>Live Face Match</title>
    <!-- Include the CompreFace SDK from CDN -->
<script src="https://cdn.jsdelivr.net/npm/@exadel/compreface-js-sdk@1.0.0/dist/compreface-js-sdk.min.js"></script>
</head>
<body>
    <h1>Live Face Recognition</h1>
    <video id="webcam" autoplay muted width="640" height="480"></video>
    <p id="result">Result: Waiting...</p>

    <script>
	 window.onload = function() {
    // Check all possible global names the library might use
    const SDK = window.CompreFace || (window.compreface_js_sdk ? window.compreface_js_sdk.CompreFace : null);

    if (!SDK) {
        document.getElementById('result').innerText = "Error: SDK failed to initialize. Try refreshing or check internet.";
        console.error("SDK not found. Available window variables:", Object.keys(window).filter(i => i.toLowerCase().includes('compre')));
        return;
    }

    const url = "https://shaniqua-unimparted-subarticulately.ngrok-free.dev"; 
    const port = 443; 
    const api_key = "df0463f7-57a6-4e72-9fae-7ea2c5a32e37";

    // Use the constructor directly
    const compreFace = new SDK(url, port);
    const recognitionService = compreFace.initFaceRecognitionService(api_key);
    
    // ... rest of your startWebcam code ...
     };

    </script>
</body>
</html>
